---
title: '外部ドメインでホストされているリソースをみだりに読み込むべきではないという話'
date: '2023-01-27'
---

[IIJ Engineering Blog の「その証明書、安全ですか？」という記事](https://eng-blog.iij.ad.jp/archives/17668)を読んだ。小難しい話をユーモアをまじえて解説する、良い記事だと思った。

この記事の「事例3: KLAYswap」のところに次のように書かれている。

> この事例でハイジャックされたのはKLAYswap自体ではなく、KLAYswapが利用するJavaScriptのライブラリが置かれていた外部のサイトでした。KLAYswapにアクセスしたユーザは、偽の外部サイトから改竄されたJavaScriptファイルをダウンロードし、それを実行して仮想通貨を奪われました。
 
これは個人的には古傷をえぐられる事例で、過去にコードレビューで「みだりに外部ドメインのリソースを読むべきではなく、可能な限り自分たちで管理できるドメインにリソースを移動して使うべきである」と主張したものの「考えすぎだ」と却下されたことがある。僕の言葉遣いがいたらなかったのかもしれないし、いわゆる信頼残高が足りなかったのかもしれない。しかし、具体的にそういう事例を例示できれば説得力も増すものだし、記憶に留めておこうと思った。
