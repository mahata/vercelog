---
title: 'Software Engineering at Google: Chapter 1 - What Is Software Engineering'
date: '2023-01-xx'
---

『[Software Engineering at Google](https://learning.oreilly.com/library/view/software-engineering-at/9781492082781/)』の第一章「What Is Software Engineering」を読んだ感想をメモしていく。

## Hyrum's Law

この章では「[Hyrum's Law](https://www.hyrumslaw.com/)」という言葉が導入される。本書の後の方でも何度か言及されるキーワードである。「Hyrum...誰...??」と思ったけど、これは著者の Hyrum Wright さんのことのようだ。

本には次のように書かれている。

> With a sufficient number of users of an API, it does not matter what you promise in the contract: all observable behaviors of your system will be depended on by somebody.
> 
> (抄訳) 十分な数の API 利用者がいれば、契約で約束した内容は重要ではありません。あなたのシステムで観測できる挙動はすべて、誰かに依存されることになります。

これはどういうことを言っているのだろうか。書籍では `hash container` を例に説明しているけど、もう少し具体的に Python で Hyrum's Law に該当する例を示してみよう。

Python では dict オブジェクトへのデータ挿入順が伝統的には保持されなかった。しかし [バージョン 3.7 から dict オブジェクトの挿入順序が保存される](https://docs.python.org/ja/3/whatsnew/3.7.html)。それでは、`dict` がデータの挿入順を保持することに依存するコードを書いて良いのかというと...微妙である。まだ見ぬバージョンでこの振る舞いが変わる可能性もある。

そして「あなたのシステムで観測できる挙動はすべて、誰かに依存されることになります」というのは、バージョン 3.6 までの Python では dict を経由することで、これを疑似ランダマイザーとして使うプログラマーがいたであろう、という意味だ。たくさんの API (この例では Python の dict オブジェクトの API) ユーザーが存在するので、**たまたま** 未定義の振る舞いを観測したプログラマーが、それに依存したコードを書いてしまうのである。

プログラミング言語の未定義な振る舞いを活用したプログラムは「賢い」プログラムである。しかし、このような「賢さ」はソフトウェアエンジニアリングの文脈では褒められるものではない、としている。

## Scale and Efficiency (スケールと効率性)

サービスのためのソースコードが線形に増えたとしても、ビルドシステムやバージョン管理がそれを扱う時間は線形に増えてはならない、という旨の記述があった。

ソースコードの成長に合わせてビルドシステムが遅くなるような現象は「ゆでガエル」と例えられている。急に顕在化する問題ではなく、じわじわと悪化する類の問題であるため、問題に気づきにくい。

## Trade-offs and Costs (トレードオフとコスト)

組織の健全性はキャッシュフローだけの問題ではない。次の一節は素晴らしい話だと思った。

> Efficiency gains from keeping engineers happy, focused, and engaged can easily dominate other factors, simply because focus and productivity are so variable, and a 10-to-20% difference is easy to imagine.
> 
> (抄訳) エンジニアが幸せで、集中し、仕事に打ち込むことで得られる効率性は、他の要因を圧倒します。なぜなら、集中力と生産性は非常に変わりやすく、10～20%の差は簡単に想像できるからです。

僕たちエンジニアの幸せに組織が投資することが、単なる福利厚生ではなくて組織としての成長に寄与するのだ、という話だ。「10~20% の差」という数字の根拠は特に書かれていなかったけど、直感的にもそのくらいの差はあるだろうと思う (少なく見積もっても)。

## Example: Markers (マーカーの例)

「誰もがホワイトボードのマーカーがインク切れしていて時間を無駄にしたことがあるでしょう」という話からはじまり、「Google では、ほぼ全てのオフィスに無制限にマーカーを持ち出せるクローゼットがある」という自慢話が続く。

ホワイトボードを「使いたいときに使えるようにしておく」ことで得られるメリットが「ホワイトボードマーカーが盗まれる可能性」というリスクよりも大きい、ということだろう。そりゃそうだ、と思う。

ところで、本書のマネージャーに関する章では「自分たちのメンバーを大人扱いすれば、メンバーは大人のように振る舞う」という話がある。そういう意味では、こういう文房具の管理をすることは社員に対する信頼の現れでもあるし、副次的な効果もあるかもしれない。

## Revisiting Decisions, Making Mistakes (再訪: 決断すること、ミスをすること)

この節では「誤りを認めるリーダーは、そうでないリーダーよりも尊敬される」という話が印象に残っている。これは「直感に反するかもしれない」という書かれ方であったけど、僕の直感とは合っている。

リーダーは単なる役割なので、リーダーは単なる人間である。そうであればミスをする方が普通だし、ミスをしないかのように振る舞われると迷惑である。リーダーが jerk だと最悪だ。

そういう意味では誤りを認めるリーダーは尊敬されるというより、誤りを認めないリーダーは同僚として迷惑、というだけの話かもしれない。
